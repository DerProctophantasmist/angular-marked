(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.angularMarked=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var unindent=require("./strip-indent");function markedProvider(){var self=this;self.setRenderer=function(opts){this.renderer=opts};self.setDataPath=function(path){this.dataPath=path};self.setOptions=function(opts){this.defaults=opts};self.$get=["$log","$window",function($log,$window){var m;try{m=require("marked")}catch(err){m=$window.marked||marked}if(angular.isUndefined(m)){$log.error("angular-marked Error: marked not loaded.  See installation instructions.");return}var r=new m.Renderer;if(self.renderer){var o=Object.keys(self.renderer);var l=o.length;while(l--){r[o[l]]=self.renderer[o[l]]}}self.defaults=self.defaults||{};self.defaults.renderer=r;m.setOptions(self.defaults);m.dataPath=self.dataPath?self.dataPath:"";return m}]}markedDirective.$inject=["marked","$http","$compile","Locale","State","MarkdownEditor","DataFile"];function markedDirective(marked,$http,$compile,Locale,State,MarkdownEditor,DataFile){return{restrict:"AE",replace:true,scope:{opts:"=",marked:"=",compile:"@",src:"=",filename:"="},link:function(scope,element,attrs){element.css("position","relative");scope.editor={shouldShow:function(){return State.showEditors&&attrs.filename},open:function(){alert("Can't edit "+scope.localizedFilename+" yet, wait until it is loaded.")}};var localizeFilename=function(filename){if(filename.substr(-3)!==".md"){filename=filename+"."+Locale.get().language+".md"}scope.localizedFilename=filename;filename=filename;return filename};function onChange(markdown){set(markdown);scope.data=markdown;scope.$apply()}function onSuccess(content){scope.editor.open=function(){console.log("stored data for "+scope.localizedFilename+":\n"+scope.data);MarkdownEditor.open(scope.localizedFilename,scope.data)};scope.data=content;set(content)}var fileCallbacks={onChange:onChange,on404:onSuccess,onError:function(){alert("There was a problem loading "+scope.localizedFilename+" editor is disabled.")},onSuccess:onSuccess};var getContent=function(filename){DataFile.read(filename,fileCallbacks,scope)};if(attrs.marked){set(scope.marked);scope.$watch("marked",set)}else if(attrs.src){scope.$watch("src",function(src){getContent(src)})}else if(attrs.filename){var localeListener=null;scope.$watch("filename",function(filename){var file;if(localeListener)Locale.offChange(localeListener);if(filename==null){set("");return}file=localizeFilename(filename);if(filename.substr(-3)!==".md"){localeListener=function(){getContent(localizeFilename(filename))};Locale.onChange(localeListener)}getContent(file)})}else{set(element.text())}function set(text){element.html(marked(String(text||""),scope.opts||null));if(scope.$eval(attrs.compile)){$compile(element.contents())(scope.$parent)}if(attrs.filename){var html='<a ng-if="editor.shouldShow()"  ng-click="editor.open()" class="btn-floating btn-default btn" style="position:absolute;top:0%;color:black;z-index:1000"><i class="fa fa-edit" style="color:black"></i><span  style="color:black">{{localizedFilename}}</span></a>';element.append($compile(html)(scope))}}}}}module.exports=angular.module("hc.marked",[]).directive("marked",markedDirective).provider("marked",markedProvider).name},{"./strip-indent":2,marked:"marked"}],2:[function(require,module,exports){module.exports=function unindent(text){if(!text){return text}var lines=text.replace(/\t/g,"  ").split(/\r?\n/);var min=null;var len=lines.length;var i;for(i=0;i<len;i++){var line=lines[i];var l=line.match(/^(\s*)/)[0].length;if(l===line.length){continue}min=l<min||min===null?l:min}if(min!==null&&min>0){for(i=0;i<len;i++){lines[i]=lines[i].substr(min)}}return lines.join("\n")}},{}]},{},[1])(1)});